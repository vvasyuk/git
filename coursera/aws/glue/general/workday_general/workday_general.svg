<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="587px" preserveAspectRatio="none" style="width:1044px;height:587px;" version="1.1" viewBox="0 0 1044 587" width="1044px" zoomAndPan="magnify"><defs><filter height="300%" id="f1e1wbgdvwbtht" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d80a0acb219980f04c954dc799d0dcd0]
cluster Oracle--><path d="M253,16 C253,6 297,6 297,6 C297,6 341,6 341,16 L341,101 C341,111 297,111 297,111 C297,111 253,111 253,101 L253,16 " fill="#FFFFFF" filter="url(#f1e1wbgdvwbtht)" style="stroke:#000000;stroke-width:1.5;"/><path d="M253,16 C253,26 297,26 297,26 C297,26 341,26 341,16 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="274" y="42.5332">Oracle</text><!--MD5=[c444070a69c905f8781a2e7d91c12e8c]
cluster aws--><rect fill="#FFFFFF" filter="url(#f1e1wbgdvwbtht)" height="414" style="stroke:#000000;stroke-width:1.5;" width="1025" x="7" y="161"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27" x="506" y="177.5332">aws</text><!--MD5=[e80b2a2e2b06ce4648c08fd86acf756b]
cluster s3--><rect fill="#FFFFFF" filter="url(#f1e1wbgdvwbtht)" height="90" style="stroke:#000000;stroke-width:1.5;" width="964" x="31" y="342"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="505" y="358.5332">s3</text><!--MD5=[e99e64f544e03e74d5532d92e9db740c]
cluster Destination--><path d="M650,16 C650,6 698,6 698,6 C698,6 746,6 746,16 L746,101 C746,111 698,111 698,111 C698,111 650,111 650,101 L650,16 " fill="#FFFFFF" filter="url(#f1e1wbgdvwbtht)" style="stroke:#000000;stroke-width:1.5;"/><path d="M650,16 C650,26 698,26 698,26 C698,26 746,26 746,16 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="658" y="42.5332">Destination</text><!--MD5=[5f2f9dbbee692058d60489180693f774]
entity users--><polygon fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" points="269.5,57,269.5,94.6094,324.5,94.6094,324.5,67,314.5,57,269.5,57" style="stroke:#000000;stroke-width:1.5;"/><path d="M314.5,57 L314.5,67 L324.5,67 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="279.5" y="81.5332">users</text><!--MD5=[0326ef6a89fd880aa31aa4434e01ddfa]
entity glue_raw_ingest--><rect fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" height="63.2188" style="stroke:#000000;stroke-width:1.5;" width="201" x="196.5" y="206"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="206.5" y="230.5332">glue_raw_ingest</text><line style="stroke:#000000;stroke-width:1.0;" x1="197.5" x2="396.5" y1="233.6094" y2="233.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="206.5" y="252.1426">-reads data for currentDay-1</text><!--MD5=[766bd930fc042a6da06a29ed2ea9a3bc]
entity glue_master_ingest--><rect fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" height="63.2188" style="stroke:#000000;stroke-width:1.5;" width="144" x="739" y="206"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="749" y="230.5332">glue_master_ingest</text><line style="stroke:#000000;stroke-width:1.0;" x1="740" x2="882" y1="233.6094" y2="233.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="749" y="252.1426">-reads all data?</text><!--MD5=[3a33c3f45588e2bbeeb8373005122c8d]
entity glue_recon--><rect fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" height="63.2188" style="stroke:#000000;stroke-width:1.5;" width="334" x="481" y="496"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="491" y="520.5332">glue_recon</text><line style="stroke:#000000;stroke-width:1.0;" x1="482" x2="814" y1="523.6094" y2="523.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="314" x="491" y="542.1426">-reads data for currentDay-1 from raw and master</text><!--MD5=[3e93cece59fb52622bb61887c05af2cb]
entity lambda--><rect fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" height="80.8281" style="stroke:#000000;stroke-width:1.5;" width="235" x="468.5" y="197"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="46" x="478.5" y="221.5332">lambda</text><line style="stroke:#000000;stroke-width:1.0;" x1="469.5" x2="702.5" y1="224.6094" y2="224.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="478.5" y="243.1426">-reads data for transformed</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="215" x="478.5" y="260.752">-call python script for post request</text><!--MD5=[e6fbd740fa997cfa4de4833ce2b330f2]
entity raw--><polygon fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" points="47,378,47,415.6094,311,415.6094,311,388,301,378,47,378" style="stroke:#000000;stroke-width:1.5;"/><path d="M301,378 L301,388 L311,388 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="244" x="57" y="402.5332">/Raw/user/day=currentDay-1 (parquet)</text><!--MD5=[e6001af16d4774e0fdad2715570119d9]
entity master--><polygon fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" points="699,378,699,415.6094,979,415.6094,979,388,969,378,699,378" style="stroke:#000000;stroke-width:1.5;"/><path d="M969,378 L969,388 L979,388 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="260" x="709" y="402.5332">/Master/user/day=currentDay-1 (parquet)</text><!--MD5=[27cb08fde35bc8e7d632620b6a63a92e]
entity transformed--><polygon fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" points="346,378,346,415.6094,664,415.6094,664,388,654,378,346,378" style="stroke:#000000;stroke-width:1.5;"/><path d="M654,378 L654,388 L664,388 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="298" x="356" y="402.5332">/Transformed/user/day=currentDay-1 (parquet)</text><!--MD5=[645d8587175d8f7ad110cd370775931d]
entity API--><polygon fill="#FEFECE" filter="url(#f1e1wbgdvwbtht)" points="677.5,57,677.5,94.6094,718.5,94.6094,718.5,67,708.5,57,677.5,57" style="stroke:#000000;stroke-width:1.5;"/><path d="M708.5,57 L708.5,67 L718.5,67 " fill="#FEFECE" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="687.5" y="81.5332">API</text><!--MD5=[24c1091fb934bc87a17d23d9a0e03b68]
link users to glue_raw_ingest--><path d="M297,95.3 C297,120.93 297,168.05 297,200.77 " fill="none" id="users-to-glue_raw_ingest" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="297,205.89,301,196.89,297,200.89,293,196.89,297,205.89" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="298" y="141.4951">step1 - read data</text><!--MD5=[4ee8dd2129bcb5ea3ce000a55f004bbf]
link glue_raw_ingest to raw--><path d="M273.97,269.24 C251.05,299.83 216.42,346.05 195.92,373.41 " fill="none" id="glue_raw_ingest-to-raw" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="192.76,377.64,201.36,372.84,195.76,373.64,194.96,368.04,192.76,377.64" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="242" y="322.4951">step2 - write as is</text><!--MD5=[69ae1f38ecab9c94a9a9b8365e25ec20]
link glue_raw_ingest to glue_master_ingest--><!--MD5=[e2ac2df984292f4ec88deebbafbb1e46]
link API to glue_master_ingest--><path d="M718.53,93.18 C729.33,102.35 742.3,114.47 752,127 C769.65,149.79 784.94,178.59 795.53,200.93 " fill="none" id="API-to-glue_master_ingest" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="797.71,205.6,797.5016,195.7533,795.5831,201.0749,790.2615,199.1564,797.71,205.6" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="764" y="141.4951">step3 - read data</text><!--MD5=[3ce9c82e6f8baa6e70ce3336a78196e1]
link glue_master_ingest to master--><path d="M816.47,269.24 C821.84,299.46 829.92,344.92 834.8,372.39 " fill="none" id="glue_master_ingest-to-master" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="835.74,377.64,838.1071,368.0798,834.867,372.7168,830.23,369.4767,835.74,377.64" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="826" y="322.4951">step4 - write as is</text><!--MD5=[547accb8c336ab80f453a1036d35ce59]
link glue_master_ingest to glue_recon--><!--MD5=[84151c564376f9db21abdd149ac138ee]
link raw to glue_recon--><path d="M243.2,416.1 C269.75,423.55 300.84,432.24 329,440 C395.18,458.24 469.18,478.32 529.23,494.54 " fill="none" id="raw-to-glue_recon" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="534.26,495.9,526.6265,489.6767,529.4355,494.5868,524.5254,497.3959,534.26,495.9" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="417" y="462.4951">step5 - read data</text><!--MD5=[9c0794fb0a985587556e14b88aa7bfff]
link master to glue_recon--><path d="M812.04,416.14 C782.49,436.02 734.45,468.34 697.97,492.88 " fill="none" id="master-to-glue_recon" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="693.59,495.83,703.2906,494.1274,697.7392,493.04,698.8266,487.4887,693.59,495.83" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="761" y="462.4951">step6 - read data</text><!--MD5=[c804ca25a62e6c22e258fdee4704ef35]
reverse link transformed to glue_recon--><path d="M529.09,419.65 C552.33,440.53 587.73,472.35 613.87,495.83 " fill="none" id="transformed-backto-glue_recon" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="525.19,416.14,529.2038,425.1339,528.9065,419.4848,534.5555,419.1875,525.19,416.14" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="577" y="462.4951">step7 - write data</text><!--MD5=[31cf36197efa9e61453a574e1fc83225]
link glue_master_ingest to lambda--><!--MD5=[7cb47d747eb78f9ec844d612a46e176c]
reverse link lambda to transformed--><path d="M563.22,282.8 C547.09,314.16 526.3,354.59 514.43,377.67 " fill="none" id="lambda-backto-transformed" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="565.56,278.24,557.8858,284.4131,563.2726,282.6861,564.9996,288.0729,565.56,278.24" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="548" y="322.4951">step 8 - read data</text><!--MD5=[68ba486843060264a9baa8d95a2ebdf6]
reverse link API to lambda--><path d="M673.28,95.67 C662.78,104.41 650.93,115.43 642,127 C625.56,148.3 611.74,175.16 601.94,196.94 " fill="none" id="API-backto-lambda" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="677.38,92.31,667.883,94.919,673.5121,95.4785,672.9526,101.1076,677.38,92.31" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="643" y="141.4951">step 9 - write data</text><!--MD5=[eedd970056241aae7052762ad17042c6]
link raw to master--><!--MD5=[6b304285d7fa3e84514ef9c17adf84e4]
link master to transformed--><!--MD5=[d5026c552b62392be4de6ec3cff08bec]
@startuml
'skinparam linestyle ortho
'rectangle "A" as one
'rectangle "B" as two
'rectangle "C" as three
'rectangle "D" as four

'one -right-> two: message 1- ->2
'two -right-> three: message 2- ->3
'two - -> four: message 2- ->4
'three -[hidden]- four

database Oracle{
    file users
}

rectangle aws{
    rectangle glue_raw_ingest[
        glue_raw_ingest
        - - -
        -reads data for currentDay-1
    ]

    rectangle glue_master_ingest[
        glue_master_ingest
        - - -
        -reads all data?
    ]

    rectangle glue_recon[
        glue_recon
        - - -
        -reads data for currentDay-1 from raw and master
    ]

    rectangle lambda[
        lambda
        - - -
        -reads data for transformed
        -call python script for post request
    ]    

    rectangle s3{
        file "/Raw/user/day=currentDay-1 (parquet)" as raw
        file "/Master/user/day=currentDay-1 (parquet)" as master
        file "/Transformed/user/day=currentDay-1 (parquet)" as transformed
    }    
}

database Destination{
    file API
}

glue_raw_ingest <-up- users: step1 - read data
glue_raw_ingest -down-> raw: step2 - write as is
glue_raw_ingest -[hidden]right-> glue_master_ingest

glue_master_ingest <-up- API: step3 - read data
glue_master_ingest -down-> master: step4 - write as is

glue_master_ingest -[hidden]right-> glue_recon
glue_recon <-up- raw: step5 - read data
glue_recon <-up- master: step6 - read data
glue_recon -up-> transformed: step7 - write data

glue_master_ingest -[hidden]right-> lambda
lambda <-down- transformed: step 8 - read data
lambda -up-> API: step 9 - write data

raw -[hidden]right-> master
master -[hidden]right-> transformed

@enduml

@startuml


database Oracle{
    file users
}

rectangle aws{
    rectangle glue_raw_ingest[
        glue_raw_ingest
        - - -
        -reads data for currentDay-1
    ]

    rectangle glue_master_ingest[
        glue_master_ingest
        - - -
        -reads all data?
    ]

    rectangle glue_recon[
        glue_recon
        - - -
        -reads data for currentDay-1 from raw and master
    ]

    rectangle lambda[
        lambda
        - - -
        -reads data for transformed
        -call python script for post request
    ]    

    rectangle s3{
        file "/Raw/user/day=currentDay-1 (parquet)" as raw
        file "/Master/user/day=currentDay-1 (parquet)" as master
        file "/Transformed/user/day=currentDay-1 (parquet)" as transformed
    }    
}

database Destination{
    file API
}

glue_raw_ingest <-up- users: step1 - read data
glue_raw_ingest -down-> raw: step2 - write as is
glue_raw_ingest -[hidden]right-> glue_master_ingest

glue_master_ingest <-up- API: step3 - read data
glue_master_ingest -down-> master: step4 - write as is

glue_master_ingest -[hidden]right-> glue_recon
glue_recon <-up- raw: step5 - read data
glue_recon <-up- master: step6 - read data
glue_recon -up-> transformed: step7 - write data

glue_master_ingest -[hidden]right-> lambda
lambda <-down- transformed: step 8 - read data
lambda -up-> API: step 9 - write data

raw -[hidden]right-> master
master -[hidden]right-> transformed

@enduml

PlantUML version 1.2020.22(Sun Dec 06 11:36:27 EET 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>